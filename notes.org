TODO:
* Update state.file on read
* Make all methods on buffer utilise the 'check_selection' method
* Imprement proper print method with syntax highlighting
